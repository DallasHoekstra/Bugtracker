
{% extends "bugtrackerApp/base.html" %}

{% block content %}
    <div class="bug-body">
        <div class="bug-status-container">
            <p class="title" style="text-align: center;">Unassigned</p>
            {% for bug in bugs %}
                {% if bug.status.code == 0 %}
                        <article class="media content-section">
                        <div class="media-body">
                            <div class="article-metadata">
                                <div>
                                    {% if bug.lead != "" %}
                                       <p>{{ bug.lead }}</p>
                                    {% else %}
                                        <a class="mr-2" href="{% url 'user-bugs' bug.creator.username %}">{{ bug.creator }}</a>
                                    {% endif %}
                                    
                                    <small class="text-muted" style="text-align: left;">Created: {{ bug.created_at }}</small>
                                    <small class="text-muted" style="text-align: right;">Updated: {{ bug.last_modified }}</small>
                                </div>
                            </div>
                            <h2><a class="article-title" href="{% url 'bug-detail' bug.id %}">{{ bug.title }}</a></h2>
                            <p class="article-content">{{ bug.description }}</p>
                            <p> {{ bug.creator.email }}</p>
                            <div>
                                {% if bug.creator == user %}
                                    <a class="btn btn-secondary btn-sm mt-1 mb-1"href="{% url 'bug-update' bug.id %}">Update</a>
                                    <a class="btn btn-danger btn-sm mt-1 mb-1"href="{% url 'bug-delete' bug.id %}">Delete</a>
                                {% endif %}
                            </div>
                        </div>
                    </article>
                {% endif %}
            {% endfor %}
        </div>
        <div class="bug-status-container">
            <p class="title" style="text-align: center;">Assigned</p>
            {% for bug in bugs %}
                {% if bug.status.code == 1 %}
                    <article class="media content-section">
                        <div class="media-body">
                            <div class="article-metadata">
                                <div>
                                    {% if bug.lead != None %}
                                       <p>{{ bug.lead }}</p>
                                    {% else %}
                                        <a class="mr-2" href="{% url 'user-bugs' bug.creator.username %}">{{ bug.creator }}</a>
                                    {% endif %}
                                    <small class="text-muted" style="text-align: left;">Created: {{ bug.created_at }}</small>
                                    <small class="text-muted" style="text-align: right;">Updated: {{ bug.last_modified }}</small>
                                </div>
                            </div>
                            <h2><a class="article-title" href="{% url 'bug-detail' bug.id %}">{{ bug.title }}</a></h2>
                            <p class="article-content">{{ bug.description }}</p>
                            <div>
                                {% if bug.creator == user %}
                                    <a class="btn btn-secondary btn-sm mt-1 mb-1"href="{% url 'bug-update' bug.id %}">Update</a>
                                    <a class="btn btn-danger btn-sm mt-1 mb-1"href="{% url 'bug-delete' bug.id %}">Delete</a>
                                {% endif %}
                            </div>
                        </div>
                    </article>
                {% endif %}
            {% endfor %}
        </div>
        <div class="bug-status-container">
            <p class="title" style="text-align: center;">In Progress</p>
            {% for bug in bugs %}
                {% if bug.status.code == 2 %}

                    <article class="media content-section">
                        <div class="media-body">
                            <div class="article-metadata">
                                <div>
                                    {% if bug.lead != None %}
                                       <p>{{ bug.lead }}</p>
                                    {% else %}
                                        <a class="mr-2" href="{% url 'user-bugs' bug.creator.username %}">{{ bug.creator }}</a>
                                    {% endif %}
                                    <small class="text-muted" style="text-align: left;">Created: {{ bug.created_at }}</small>
                                    <small class="text-muted" style="text-align: right;">Updated: {{ bug.last_modified }}</small>
                                </div>
                            </div>
                            <h2><a class="article-title" href="{% url 'bug-detail' bug.id %}">{{ bug.title }}</a></h2>
                            <p class="article-content">{{ bug.description }}</p>
                            <div>
                                {% if bug.creator == user %}
                                    <a class="btn btn-secondary btn-sm mt-1 mb-1"href="{% url 'bug-update' bug.id %}">Update</a>
                                    <a class="btn btn-danger btn-sm mt-1 mb-1"href="{% url 'bug-delete' bug.id %}">Delete</a>
                                {% endif %}
                            </div>
                        </div>
                    </article>

                {% endif %}

            {% endfor %}
        </div>
        <div class="bug-status-container">
            <p class="title" style="text-align: center;">Closed</p>
            {% for bug in bugs %}
                {% if bug.status.code == 3 or bug.status.code == 31 or bug.status.code == 35 %}

                    <article class="media content-section">
                        <div class="media-body">
                            <div class="article-metadata">
                                <div>
                                    {% if bug.lead != None %}
                                       <p>{{ bug.lead }}</p>
                                    {% else %}
                                        <a class="mr-2" href="{% url 'user-bugs' bug.creator.username %}">{{ bug.creator }}</a>
                                    {% endif %}
                                    <small class="text-muted" style="text-align: left;">Created: {{ bug.created_at }}</small>
                                    <small class="text-muted" style="text-align: right;">Updated: {{ bug.last_modified }}</small>
                                </div>
                            </div>
                            <h2><a class="article-title" href="{% url 'bug-detail' bug.id %}">{{ bug.title }}</a></h2>
                            <p class="article-content">{{ bug.description }}</p>
                            <div>
                                {% if bug.creator == user %}
                                    <a class="btn btn-secondary btn-sm mt-1 mb-1"href="{% url 'bug-update' bug.id %}">Update</a>
                                    <a class="btn btn-danger btn-sm mt-1 mb-1"href="{% url 'bug-delete' bug.id %}">Delete</a>
                                {% endif %}
                            </div>
                        </div>
                    </article>
                {% endif %}
            {% endfor %}
        </div>
    </div>
{% endblock content %}
